
# Computational Analysis of Chinese Poker
#### August, 2019
Computational analysis of the exploitability of 'Chinese Poker' strategies 

## Preface
All code in this repository is a work in progress. It was written in under a somewhat tight deadline and so is in dire need of refactoring. Comprehensive unit tests have not been written yet. I caution that what is published here is incomplete. That said, the authors are continuing to work on this project remotely.

## Project Organization
### Alpha Beta Composer
The payoff composer class composes all possible payoffs of five-card hands, otherwise known as alpha or beta payoffs. The payoff composer is not a part of the poker simulating program, and is only intended to generate a binary file containing every possible alpha/beta payoff. Each payoff will take as members the hand itself (a 64-bit integer type with the right 52-bits each representing one card of a 52 card deck, ascending in order), the rank of that hand, and a byte representing the payoff (pair, full house, three-of-a-kind, etc.). 

Each composer class shares a parent with the base composer class, and the top level payoff composer virtually inherits from each (probably a poor decision on my part). Each composer has at least one public member function which generates and yields one payoff in order of greatest to least value, or lowest to highest rank (lower rank beats higher rank). So, each class is a generator. The base provides a getter function to the boolean is_finished. When one type of payoff has generated each of its combinations, it will flag is_finished as true.

### Gamma Composer
The gamma composers compose all three card payoffs, otherwise known as gamma payoffs. They do this in two modules, a gamma pairs composer and a gamma 'trips' or three-of-a-kind composer. Each is intended to generate a binary file of every possible gamma pair or gamma trips.

Since Chinese poker involves comparing the values of alpha/beta and gamma payoffs, and high card is taken into consideration, gamma payoffs have sub ranks that must be calculated at run time whenever two gamma payoffs are compared with the same rank.

### Chinese Poker
A program split into four classes for simulating many games of Chinese Poker using a variety of strategies.

*Hand and Deck*
The hand class is simple container for cards. Decks are just hands with an additional pseudo random number generator for dealing cards. Currently the Mersenne Twister is the PRNG being used, but it may need to be replaced if the simulation is supposed to be a Monte-Carlo.

*Payoff Table*
The payoff table is a hash map which generates a series of keys from a hand to search out all possible payoffs satisfied by that hand. It reads in the payoffs from the binaries generated by the composers.

*Player*
Players contain hands and lists of payoffs. Players send their hands to the look up tables and pointers to all possible payoffs satisfied by their hands are inserted in the players' lists. (I say 'list' and 'insert', but the payoff pointers are really stored in static arrays because we can easily calculate the maximum number of payoffs a thirteen card hand could have.) To be added still is the ability of players to select turn-ins from their lists of payoffs. After some toying around it was decided it is always best to find every possible, valid turn-in from the players' payoff lists.

*Chinese Poker*
The game module which deals cards to players, compares their turn-ins and awards points. This top-level module is one of the simplest as it turns out.
 
 
# To Do
- Simulator
- Turn-in calculator
- Strategic selection of turn-ins 
- Sanity Checks
- Unit Tests
- Refactor and fix name conventions

##  Authors
Adam Ray Coger

Ian Miller
